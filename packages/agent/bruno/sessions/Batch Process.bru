meta {
  name: Batch Process
  type: http
  seq: 4
}

post {
  url: {{baseUrl}}/sessions/batch
  body: json
  auth: none
}

body:json {
  {
    "projectPath": "{{worktreePath}}",
    "labels": ["agent-ready"],
    "maxParallel": 3
  }
}

docs {
  ## Batch Process Backlog

  Scans the GitHub issue backlog and spawns parallel sessions
  for eligible issues. Requires Hatchet for the `backlog-processor` workflow.

  **Request body:**
  - `projectPath` (required) — Path to the git repo
  - `labels` (optional) — Only pick issues with these labels (default: from config)
  - `maxParallel` (optional) — Max concurrent sessions (default: from config)

  **Response (202):**
  ```json
  {
    "workflowRunId": "wfr_abc123",
    "message": "Backlog processor started"
  }
  ```
}
